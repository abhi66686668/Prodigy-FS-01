<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout - Skanda Fruits</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Checkout-specific styles */
        .checkout-container {
            max-width: 1200px;
            margin: 20px auto;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 30px;
        }

        .checkout-form {
            flex: 2;
            min-width: 300px;
        }

        .order-summary {
            flex: 1;
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            height: fit-content;
        }

        .form-section {
            margin-bottom: 30px;
        }

        .form-section h3 {
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .form-row {
            margin-bottom: 15px;
        }

        .form-row label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-row input, 
        .form-row select, 
        .form-row textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: 'Poppins', sans-serif;
        }

        .form-row textarea {
            height: 80px;
        }

        .form-row .half-width {
            display: inline-block;
            width: calc(50% - 5px);
        }

        .form-row .half-width:first-child {
            margin-right: 10px;
        }

        .payment-methods {
            margin-top: 15px;
        }

        .payment-method {
            display: flex;
            align-items: center;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            margin-bottom: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .payment-method:hover {
            border-color: #4CAF50;
        }

        .payment-method.active {
            border-color: #4CAF50;
            background-color: #f5fff5;
        }

        .payment-method input {
            margin-right: 10px;
        }

        .payment-method-icon {
            margin-right: 10px;
            font-size: 20px;
        }

        .payment-method-details {
            flex-grow: 1;
        }

        .payment-method-title {
            font-weight: 500;
        }

        .payment-method-description {
            font-size: 12px;
            color: #666;
        }

        .place-order-btn {
            width: 100%;
            padding: 12px;
            background: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.3s;
        }

        .place-order-btn:hover {
            background: #45a049;
        }

        .order-summary h3 {
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #ddd;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .summary-total {
            font-weight: 700;
            font-size: 18px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #ddd;
        }

        .cart-item {
            display: flex;
            gap: 10px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
            align-items: center;
        }

        .cart-item-img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }

        .cart-item-details {
            flex-grow: 1;
        }

        .cart-item-title {
            font-weight: 500;
            font-size: 14px;
            margin-bottom: 3px;
        }

        .cart-item-price {
            color: #4CAF50;
            font-size: 14px;
        }

        .cart-item-quantity {
            font-size: 14px;
            color: #666;
        }

        @media (max-width: 768px) {
            .checkout-container {
                flex-direction: column;
            }
            
            .form-row .half-width {
                width: 100%;
                margin-right: 0;
                margin-bottom: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="headnav">
            <div class="brand-name">Skanda Fruits</div>
            <div class="tagline">Fresh Fruits & Vegetables Delivered to Your Doorstep</div>
            <nav>
                <a href="index.html">Home</a>
                <a href="product/product.html">Shop</a>
                <a href="about.html">About</a>
                <a href="contact.html">Contact</a>
                <a href="cart.html" class="cart-link">Cart (0)</a>
            </nav>
        </div>
    </header>

    <!-- Main Checkout Content -->
    <main class="checkout-container">
        <div class="checkout-form">
            <h2>Checkout</h2>
            
            <!-- Shipping Information -->
            <div class="form-section">
                <h3>Shipping Information</h3>
                <div class="form-row">
                    <label for="full-name">Full Name</label>
                    <input type="text" id="full-name" required>
                </div>
                <div class="form-row">
                    <label for="address">Address</label>
                    <input type="text" id="address" required>
                </div>
                <div class="form-row">
                    <label for="city">City</label>
                    <input type="text" id="city" required>
                </div>
                <div class="form-row">
                    <div class="half-width">
                        <label for="state">State</label>
                        <input type="text" id="state" required>
                    </div>
                    <div class="half-width">
                        <label for="zip">ZIP Code</label>
                        <input type="text" id="zip" required>
                    </div>
                </div>
                <div class="form-row">
                    <label for="phone">Phone Number</label>
                    <input type="tel" id="phone" required>
                </div>
                <div class="form-row">
                    <label for="instructions">Delivery Instructions (Optional)</label>
                    <textarea id="instructions" placeholder="Any special instructions for delivery..."></textarea>
                </div>
            </div>
            
            <!-- Payment Method -->
            <div class="form-section">
                <h3>Payment Method</h3>
                <div class="payment-methods">
                    <div class="payment-method active" data-method="credit">
                        <input type="radio" name="payment-method" id="credit-card" checked>
                        <span class="payment-method-icon">💳</span>
                        <div class="payment-method-details">
                            <div class="payment-method-title">Credit/Debit Card</div>
                            <div class="payment-method-description">Pay with Visa, Mastercard, or other cards</div>
                        </div>
                    </div>
                    
                    <div class="payment-method" data-method="upi">
                        <input type="radio" name="payment-method" id="upi">
                        <span class="payment-method-icon">📱</span>
                        <div class="payment-method-details">
                            <div class="payment-method-title">UPI Payment</div>
                            <div class="payment-method-description">Pay using UPI apps like Google Pay, PhonePe</div>
                        </div>
                    </div>
                    
                    <div class="payment-method" data-method="cod">
                        <input type="radio" name="payment-method" id="cod">
                        <span class="payment-method-icon">💰</span>
                        <div class="payment-method-details">
                            <div class="payment-method-title">Cash on Delivery</div>
                            <div class="payment-method-description">Pay when you receive your order</div>
                        </div>
                    </div>
                </div>
                
                <!-- Credit Card Form (shown by default) -->
                <div id="credit-card-form" class="payment-form">
                    <div class="form-row">
                        <label for="card-number">Card Number</label>
                        <input type="text" id="card-number" placeholder="1234 5678 9012 3456">
                    </div>
                    <div class="form-row">
                        <label for="card-name">Name on Card</label>
                        <input type="text" id="card-name" placeholder="John Doe">
                    </div>
                    <div class="form-row">
                        <div class="half-width">
                            <label for="expiry">Expiry Date</label>
                            <input type="text" id="expiry" placeholder="MM/YY">
                        </div>
                        <div class="half-width">
                            <label for="cvv">CVV</label>
                            <input type="text" id="cvv" placeholder="123">
                        </div>
                    </div>
                </div>
                
                <!-- UPI Form (hidden by default) -->
                <div id="upi-form" class="payment-form" style="display: none;">
                    <div class="form-row">
                        <label for="upi-id">UPI ID</label>
                        <input type="text" id="upi-id" placeholder="yourname@upi">
                    </div>
                    <p style="font-size: 14px; color: #666;">You'll be redirected to your UPI app to complete the payment</p>
                </div>
                
                <!-- COD Notice (hidden by default) -->
                <div id="cod-notice" class="payment-form" style="display: none;">
                    <p style="font-size: 14px; color: #666;">Please keep exact change ready for the delivery person. A small convenience fee may apply.</p>
                </div>
            </div>
            
            <button id="place-order-btn" class="place-order-btn">Place Order</button>
        </div>
        
        <!-- Order Summary -->
        <div class="order-summary">
            <h3>Order Summary</h3>
            <div id="order-items">
                <!-- Items will be dynamically inserted here -->
            </div>
            
            <div class="summary-row">
                <span>Subtotal (<span id="item-count">0</span> items)</span>
                <span id="subtotal">₹0.00</span>
            </div>
            <div class="summary-row">
                <span>Delivery Charges</span>
                <span>₹50.00</span>
            </div>
            <div class="summary-row">
                <span>Taxes (12%)</span>
                <span id="taxes">₹0.00</span>
            </div>
            <div class="summary-row summary-total">
                <span>Total</span>
                <span id="total">₹50.00</span>
            </div>
            
            <p style="text-align: center; margin-top: 20px; font-size: 14px;">
                <img src="images/secure-payment.png" alt="Secure Payment" style="height: 20px; vertical-align: middle;">
                <span style="vertical-align: middle;">Secure Payment</span>
            </p>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <div class="footer-section">
                <h3>Skanda Fruits</h3>
                <p>Fresh, organic produce delivered straight to your door.</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="product/allitem.html">Shop</a></li>
                    <li><a href="about.html">About Us</a></li>
                </ul>
            </div>
            <div class="footer-section">
                <h3>Contact</h3>
                <p>123 Fruit Lane<br>Farmville, CA 12345</p>
                <p>contact@skandafruits.com</p>
            </div>
        </div>
        <div class="copyright">
            &copy; 2023 Skanda Fruits. All rights reserved.
        </div>
    </footer>

    <!-- Floating Fruits -->
    <div class="fruit-decoration apple">🍎</div>
    <div class="fruit-decoration banana">🍌</div>
    <div class="fruit-decoration grapes">🍇</div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Get cart from localStorage
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            
            // Render order summary
            function renderOrderSummary() {
                const orderItems = document.getElementById('order-items');
                orderItems.innerHTML = '';
                
                if (cart.length === 0) {
                    // Redirect to cart if empty
                    window.location.href = 'cart.html';
                    return;
                }
                
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <img src="${item.image}" alt="${item.name}" class="cart-item-img">
                        <div class="cart-item-details">
                            <div class="cart-item-title">${item.name}</div>
                            <div class="cart-item-price">${item.priceText}</div>
                            <div class="cart-item-quantity">Qty: ${item.quantity}</div>
                        </div>
                        <div class="cart-item-total">₹${(item.price * item.quantity).toFixed(2)}</div>
                    `;
                    orderItems.appendChild(cartItem);
                });
                
                updateOrderTotals();
            }
            
            // Update order totals
            function updateOrderTotals() {
                let subtotal = 0;
                const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);
                
                cart.forEach(item => {
                    subtotal += item.price * item.quantity;
                });
                
                const delivery = 50;
                const tax = subtotal * 0.12; // 12% tax
                const total = subtotal + delivery + tax;
                
                document.getElementById('item-count').textContent = itemCount;
                document.getElementById('subtotal').textContent = `₹${subtotal.toFixed(2)}`;
                document.getElementById('taxes').textContent = `₹${tax.toFixed(2)}`;
                document.getElementById('total').textContent = `₹${total.toFixed(2)}`;
                
                // Update cart count in header
                document.querySelector('.cart-link').textContent = `Cart (${itemCount})`;
            }
            
            // Payment method selection
            document.querySelectorAll('.payment-method').forEach(method => {
                method.addEventListener('click', function() {
                    // Remove active class from all methods
                    document.querySelectorAll('.payment-method').forEach(m => {
                        m.classList.remove('active');
                        m.querySelector('input').checked = false;
                    });
                    
                    // Add active class to clicked method
                    this.classList.add('active');
                    this.querySelector('input').checked = true;
                    
                    // Show the corresponding payment form
                    const methodType = this.getAttribute('data-method');
                    document.querySelectorAll('.payment-form').forEach(form => {
                        form.style.display = 'none';
                    });
                    
                    if (methodType === 'credit') {
                        document.getElementById('credit-card-form').style.display = 'block';
                    } else if (methodType === 'upi') {
                        document.getElementById('upi-form').style.display = 'block';
                    } else if (methodType === 'cod') {
                        document.getElementById('cod-notice').style.display = 'block';
                    }
                });
            });
            
            // Form validation and order placement
            document.getElementById('place-order-btn').addEventListener('click', function() {
                // Validate shipping information
                const fullName = document.getElementById('full-name').value.trim();
                const address = document.getElementById('address').value.trim();
                const city = document.getElementById('city').value.trim();
                const state = document.getElementById('state').value.trim();
                const zip = document.getElementById('zip').value.trim();
                const phone = document.getElementById('phone').value.trim();
                
                if (!fullName || !address || !city || !state || !zip || !phone) {
                    alert('Please fill in all required shipping information');
                    return;
                }
                
                // Validate payment method
                const paymentMethod = document.querySelector('input[name="payment-method"]:checked').id;
                
                if (paymentMethod === 'credit-card') {
                    const cardNumber = document.getElementById('card-number').value.trim();
                    const cardName = document.getElementById('card-name').value.trim();
                    const expiry = document.getElementById('expiry').value.trim();
                    const cvv = document.getElementById('cvv').value.trim();
                    
                    if (!cardNumber || !cardName || !expiry || !cvv) {
                        alert('Please fill in all credit card details');
                        return;
                    }
                    
                    // Simple card number validation (just length check)
                    if (cardNumber.replace(/\s/g, '').length !== 16) {
                        alert('Please enter a valid 16-digit card number');
                        return;
                    }
                } else if (paymentMethod === 'upi') {
                    const upiId = document.getElementById('upi-id').value.trim();
                    
                    if (!upiId) {
                        alert('Please enter your UPI ID');
                        return;
                    }
                }
                
                // Create order object
                const order = {
                    orderId: 'SK' + Date.now().toString().slice(-6),
                    customer: {
                        name: fullName,
                        address: address,
                        city: city,
                        state: state,
                        zip: zip,
                        phone: phone,
                        instructions: document.getElementById('instructions').value.trim()
                    },
                    payment: {
                        method: paymentMethod,
                        details: paymentMethod === 'credit-card' ? {
                            cardLast4: document.getElementById('card-number').value.trim().slice(-4)
                        } : paymentMethod === 'upi' ? {
                            upiId: document.getElementById('upi-id').value.trim()
                        } : {}
                    },
                    items: [...cart],
                    subtotal: parseFloat(document.getElementById('subtotal').textContent.replace('₹', '')),
                    delivery: 50,
                    tax: parseFloat(document.getElementById('taxes').textContent.replace('₹', '')),
                    total: parseFloat(document.getElementById('total').textContent.replace('₹', '')),
                    date: new Date().toISOString(),
                    status: 'processing'
                };
                
                // Save order to localStorage (in a real app, this would be sent to a server)
                const orders = JSON.parse(localStorage.getItem('orders')) || [];
                orders.push(order);
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // Clear the cart
                localStorage.removeItem('cart');
                
                // Redirect to confirmation page
                window.location.href = 'confirmation.html?orderId=' + order.orderId;
            });
            
            // Initialize checkout
            renderOrderSummary();
        });
    </script>
</body>
</html>